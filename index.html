<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw it Yourself</title>
    
    <!-- Favicon -->
    <link rel="icon" href="icons/favicon.ico" type="image/x-icon">
    <link rel="icon" sizes="16x16" href="icons/icon-16x16.png">
    <link rel="icon" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="icon" sizes="48x48" href="icons/icon-48x48.png">
    
    <!-- Manifest and Theme -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#000000">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- App Bar -->
    <header class="appbar">
        <h1>Draw it Yourself</h1>
    </header>

    <!-- Mode Tools -->
    <section class="mode-tools" id="mode-tools">
        <button id="scroll-lock">
            <img id="scroll-lock-icon" src="icons/unlock-16x16.svg" alt="Unlock" />
        </button>
    </section> 
    
    <!-- Tool Options -->
    <section class="tools" id="tools">
        <button id="black" class="button">검정</button>
        <button id="red" class="button">빨강</button>
        <button id="blue" class="button">파랑</button>
        <button id="yellow" class="button">노랑</button>
        <button id="eraser" class="button">지우개</button>
        <button id="save" class="button">저장</button>
        <button id="export" class="button">내보내기</button>
    </section>

    <!-- Canvas Area -->
    <main>
        <canvas id="drawingCanvas" width="800" height="600"></canvas>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>
            © 2025 DRAFT <span>|</span>
            <a href="mailto:theplaceyoung@gmail.com">theplaceyoung@gmail.com</a>
        </p>
    </footer>

    <!-- Bundle Script -->
    <script src="dist/bundle.js"></script>

    <!-- Unified Script -->
    <script>
        // 스크롤 잠금 기능 및 UI 업데이트
        import { toggleScrollLock } from './src/scrollLockUI.js';

        document.addEventListener('DOMContentLoaded', () => {
            const scrollLockButton = document.getElementById('scroll-lock');
            const scrollLockIcon = document.getElementById('scroll-lock-icon');

            function updateScrollLockUI(isLocked) {
                if (isLocked) {
                    scrollLockButton.classList.add('scroll-locked');
                    scrollLockIcon.src = 'icons/lock-16x16.svg';
                    scrollLockIcon.alt = 'Lock';
                } else {
                    scrollLockButton.classList.remove('scroll-locked');
                    scrollLockIcon.src = 'icons/unlock-16x16.svg';
                    scrollLockIcon.alt = 'Unlock';
                }
            }

            scrollLockButton.addEventListener('click', () => {
                const isLocked = toggleScrollLock();
                updateScrollLockUI(isLocked);
            });

            updateScrollLockUI(false); // 초기 상태 설정

            // 2초 후에 아이콘 이미지 로드
            setTimeout(function() {
                let iconImg = document.createElement('img');
                iconImg.src = 'icons/icon-192x192.png';
                iconImg.alt = 'Icon';
                document.body.appendChild(iconImg); // 페이지에 이미지 추가
            }, 2000); // 2초 후 로딩 시작
        });

        // 서비스 워커 등록
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(() => console.log('Service Worker Registered'))
                .catch((error) => console.error('Service Worker Registration Failed:', error));
        }
    </script>
</body>
</html>
